<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: description.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: description.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { OpenSearchUrl } from './url';
import { parseXml, xPath, xPathArray } from './utils';

/**
 * Class to parse the OpenSearchDescription XML document and get the saerch URLs
 */
export class OpenSearchDescription {
  /**
   * Create an OpenSearchDescription object
   * @param {string} xml The string containing the desription XML
   */
  constructor(xml) {
    // parse XML and get metadata and list of URLs
    const xmlDoc = parseXml(xml).documentElement;

    this.shortName = xPath(xmlDoc, 'os:ShortName/text()');
    this.description = xPath(xmlDoc, 'os:Description/text()');
    this.tags = xPath(xmlDoc, 'os:Tags/text()');
    this.contact = xPath(xmlDoc, 'os:Contact/text()');
    this.urls = xPathArray(xmlDoc, 'os:Url').map(
      (node) => OpenSearchUrl.fromNode(node)
    );
    this.longName = xPath(xmlDoc, 'os:LongName/text()');
    this.images = xPathArray(xmlDoc, 'os:Image').map((node) => { // eslint-disable-line
      return {
        height: parseInt(node.getAttribute('height'), 10),
        width: parseInt(node.getAttribute('width'), 10),
        type: node.getAttribute('type'),
        url: node.textContent,
      };
    });
    this.queries = xPathArray(xmlDoc, 'os:Query').map((node) => {
      const query = { role: node.getAttribute('role') };
      for (let i = 0; i &lt; node.attributes.length; ++i) {
        const attribute = node.attributes[i];
        query[attribute.name] = attribute.value;
      }
      return query;
    });
    this.developer = xPath(xmlDoc, 'os:Developer/text()');
    this.attribution = xPath(xmlDoc, 'os:Attribution/text()');
    this.syndicationRight = xPath(xmlDoc, 'os:SyndicationRight/text()');
    this.adultContent = xPath(xmlDoc, 'os:AdultContent/text()');
    this.language = xPath(xmlDoc, 'os:Language/text()');
    this.outputEncoding = xPath(xmlDoc, 'os:OutputEncoding/text()');
    this.inputEncoding = xPath(xmlDoc, 'os:InputEncoding/text()');
  }

  /**
   * Get the {@link OpenSearchUrl} for the given parameters, mime type and HTTP
   * method. Return the first matching URL or null.
   * @param {object} [parameters=null] An object containing search parameters
   * @param {string} [type=null] The mime-type for the URL
   * @param {string} [method='GET'] The preferred HTTP method of the URL
   * @returns {OpenSearchUrl|null}
   */
  getUrl(...args) {
    const urls = this.getUrls(...args);
    if (urls.length) {
      return urls[0];
    }
    return null;
  }

  /**
   * Get an array of {@link OpenSearchUrl} for the given parameters, mime type and HTTP
   * method.
   * @param {object} [parameters=null] An object containing search parameters
   * @param {string|Array} [type=null] The mime-type for the URL
   * @param {string|Array} [method=null] The preferred HTTP method of the URL
   * @returns {OpenSearchUrl[]}
   */
  getUrls(parameters = null, type = null, method = null) {
    let urls = this.urls;

    if (type) {
      urls = urls.filter(
        url => (Array.isArray(type) ? type.indexOf(url.type) > -1 : url.type === type)
      );
    }
    if (method) {
      urls = urls.filter(
        url => (Array.isArray(method) ? method.indexOf(url.method) > -1 : url.method === method)
      );
    }

    if (parameters) {
      return urls.filter(
        (url) => url.isCompatible(parameters)
      );
    }
    return urls;
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-opensearch.html">opensearch</a></li><li><a href="module-opensearch_formats.html">opensearch/formats</a></li></ul><h3>Classes</h3><ul><li><a href="-_.html"></a></li><li><a href="AtomFormat.html">AtomFormat</a></li><li><a href="GeoJSONFormat.html">GeoJSONFormat</a></li><li><a href="OpenSearchDescription.html">OpenSearchDescription</a></li><li><a href="OpenSearchService.html">OpenSearchService</a></li><li><a href="OpenSearchUrl.html">OpenSearchUrl</a></li><li><a href="RSSFormat.html">RSSFormat</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Nov 14 2016 14:10:38 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
